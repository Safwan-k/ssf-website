"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2783],{2783:(A,p,s)=>{s.r(p),s.d(p,{PartBExamPage:()=>O});var c=s(6895),e=s(433),n=s(6114),f=s(529),k=s(7667),x=s(4168),t=s(8256),B=s(1407);function q(o,_){if(1&o&&(t.TgZ(0,"ion-item",12)(1,"ion-radio",13),t._uU(2),t.qZA()()),2&o){const i=_.$implicit;t.xp6(1),t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function E(o,_){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",7)(1,"div",8)(2,"ion-label",9)(3,"b"),t._uU(4),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"ion-radio-group",10),t.NdJ("ionChange",function(a){const u=t.CHM(i),l=u.index,d=u.$implicit,m=t.oxw(2);return t.KtG(m.onRadioChange(a,l,d))}),t.YNc(7,q,3,2,"ion-item",11),t.qZA()()()}if(2&o){const i=_.$implicit,r=_.index;t.xp6(4),t.hij("",r+1,".\xa0"),t.xp6(1),t.Oqu(i.Question),t.xp6(1),t.s9C("formControlName",i.question_id),t.xp6(1),t.Q6J("ngForOf",i.choices)}}function P(o,_){if(1&o){const i=t.EpF();t.TgZ(0,"ion-row",14)(1,"ion-button",15),t.NdJ("click",function(){t.CHM(i);const a=t.oxw(2);return t.KtG(a.submitForm())}),t.TgZ(2,"ion-text",16),t._uU(3,"Submit"),t.qZA()()()}if(2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("disabled",!i.examForm.valid)}}function Q(o,_){if(1&o&&(t.TgZ(0,"ion-row",3)(1,"form",4)(2,"ion-list"),t.YNc(3,E,8,4,"ion-item",5),t.qZA(),t.YNc(4,P,4,1,"ion-row",6),t.qZA()()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.examForm),t.xp6(2),t.Q6J("ngForOf",i.questions),t.xp6(1),t.Q6J("ngIf",i.answer_loaded)}}let O=(()=>{class o{constructor(i,r,a,u){this.http=i,this.route=r,this.router=a,this.formBuilder=u,this.questions=[],this.check=!1,this.questionForms=[],this.checkQuestionFormHasDemoVal=!1,this.marksheet_final=[],this.grouped_data={},this.answer_loaded=!1,this.choices_mark={Yes:1,No:2},this.student_id=this.route.snapshot.paramMap.get("student_id"),console.log(this.student_id)}ngOnInit(){this.examForm=this.formBuilder.group({QBRE1:["",e.kI.required],QBRE2:["",e.kI.required],QBRE3:["",e.kI.required],QBRE4:["",e.kI.required],QBRE5:["",e.kI.required],QBIN1:["",e.kI.required],QBIN2:["",e.kI.required],QBIN3:["",e.kI.required],QBIN4:["",e.kI.required],QBIN5:["",e.kI.required],QBAR1:["",e.kI.required],QBAR2:["",e.kI.required],QBAR3:["",e.kI.required],QBAR4:["",e.kI.required],QBAR5:["",e.kI.required],QBSO1:["",e.kI.required],QBSO2:["",e.kI.required],QBSO3:["",e.kI.required],QBSO4:["",e.kI.required],QBSO5:["",e.kI.required],QBEN1:["",e.kI.required],QBEN2:["",e.kI.required],QBEN3:["",e.kI.required],QBEN4:["",e.kI.required],QBEN5:["",e.kI.required],QBCO1:["",e.kI.required],QBCO2:["",e.kI.required],QBCO3:["",e.kI.required],QBCO4:["",e.kI.required],QBCO5:["",e.kI.required]});try{this.http.get(k.e.PLATFORM_API_HOST_URL+"/api/json?file=part-b").subscribe(i=>{this.questions=i,this.answer_loaded=!0,console.log(i),this.check=!0,this.checkQuestionFormHasDemoVal||this.checkQuestionForm()})}catch(i){console.log("exception occured: ",i)}}checkQuestionForm(){this.checkQuestionFormHasDemoVal=!0;for(let i=0;i<this.questions.length;i++)this.questionForms.push({question_id:this.questions[i].question_id,group:this.questions[i].group})}onRadioChange(i,r,a){this.questionForms.splice(r,1,{question_id:a.question_id,group:a.group,value:i.detail.value,mark:this.choices_mark[i.detail.value]})}submitForm(){try{if(this.grouped_data={},this.examForm.valid){this.questionForms.forEach(({mark:g,group:h})=>{this.grouped_data[h]||(this.grouped_data[h]=[]),this.grouped_data[h].push(g)}),this.grouped_data=JSON.parse(JSON.stringify(this.grouped_data));const i={groups:[this.grouped_data]};console.log(i);let r=this.total_mark_of_an_array(i.groups[0].Artistic),a=this.total_mark_of_an_array(i.groups[0].Conventional),u=this.total_mark_of_an_array(i.groups[0].Enterprising),l=this.total_mark_of_an_array(i.groups[0].Investigative),d=this.total_mark_of_an_array(i.groups[0].Realistic),m=this.total_mark_of_an_array(i.groups[0].Social);const v=k.e.PLATFORM_API_HOST_URL+"/api/question?part=b",I={student_id:this.student_id,realistic:d,investigative:l,artistic:r,social:m,enterprising:u,conventional:a};x.m.setPartB(JSON.stringify(I)),this.http.post(v,I).subscribe(g=>{console.log(g)}),this.router.navigate(["/download",this.student_id])}else console.log("this is valid")}catch(i){console.log(i)}}total_mark_of_an_array(i){let r=0;for(let a=0;a<i.length;a++)r+=i[a];return r/10*100}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(f.eN),t.Y36(B.gz),t.Y36(B.F0),t.Y36(e.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-part-b-exam"]],standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[2,"display","flex","justify-content","center","margin-top","30px","font-weight","600"],[2,"font-size","22px","color","rgb(13,92,143)"],["style","display: flex; justify-content: center; background: aliceblue",4,"ngIf"],[2,"display","flex","justify-content","center","background","aliceblue"],[2,"max-width","400px",3,"formGroup"],["class","ion-margin-vertical back-trans",4,"ngFor","ngForOf"],["class","row-footer",4,"ngIf"],[1,"ion-margin-vertical","back-trans"],[2,"width","100%"],[1,"ion-margin-vertical","ion-margin-horizontal","ion-text-wrap"],[1,"ion-padding",3,"formControlName","ionChange"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["mode","md",3,"value"],[1,"row-footer"],["mode","ios","type","submit","expand","block",1,"ion-margin-vertical","ion-margin-horizontal","no-ripple",2,"--background","rgb(13,92,143)",3,"disabled","click"],[2,"font-size","18px"]],template:function(i,r){1&i&&(t.TgZ(0,"ion-content")(1,"ion-row",0)(2,"ion-text",1),t._uU(3,"Part B"),t.qZA()(),t.YNc(4,Q,5,3,"ion-row",2),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",r.answer_loaded))},dependencies:[n.Pc,n.YG,n.W2,n.Ie,n.Q$,n.q_,n.B7,n.se,n.Nd,n.yW,n.U5,n.QI,c.ez,c.sg,c.O5,e.u5,e._Y,e.JJ,e.JL,f.JF,e.UX,e.sg,e.u]}),o})()}}]);