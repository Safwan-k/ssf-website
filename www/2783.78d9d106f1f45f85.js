"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2783],{2783:(C,h,s)=>{s.r(h),s.d(h,{PartBExamPage:()=>Q});var x=s(5861),c=s(6895),o=s(433),n=s(6114),f=s(529),t=s(8256),k=s(1407);function B(r,_){if(1&r&&(t.TgZ(0,"ion-item",12)(1,"ion-radio",13),t._uU(2),t.qZA()()),2&r){const e=_.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function q(r,_){if(1&r){const e=t.EpF();t.TgZ(0,"ion-item",7)(1,"div",8)(2,"ion-label",9)(3,"b"),t._uU(4),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"ion-radio-group",10),t.NdJ("ionChange",function(a){const u=t.CHM(e),l=u.index,d=u.$implicit,m=t.oxw(2);return t.KtG(m.onRadioChange(a,l,d))}),t.YNc(7,B,3,2,"ion-item",11),t.qZA()()()}if(2&r){const e=_.$implicit,i=_.index;t.xp6(4),t.hij("",i+1,".\xa0"),t.xp6(1),t.Oqu(e.Question),t.xp6(1),t.s9C("formControlName",e.question_id),t.xp6(1),t.Q6J("ngForOf",e.choices)}}function I(r,_){if(1&r){const e=t.EpF();t.TgZ(0,"ion-row",14)(1,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.submitForm())}),t.TgZ(2,"ion-text",16),t._uU(3,"Submit"),t.qZA()()()}if(2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",!e.examForm.valid)}}function E(r,_){if(1&r&&(t.TgZ(0,"ion-row",3)(1,"form",4)(2,"ion-list"),t.YNc(3,q,8,4,"ion-item",5),t.qZA(),t.YNc(4,I,4,1,"ion-row",6),t.qZA()()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.examForm),t.xp6(2),t.Q6J("ngForOf",e.questions),t.xp6(1),t.Q6J("ngIf",e.answer_loaded)}}let Q=(()=>{class r{constructor(e,i,a,u){this.http=e,this.route=i,this.router=a,this.formBuilder=u,this.questions=[],this.check=!1,this.questionForms=[],this.checkQuestionFormHasDemoVal=!1,this.marksheet_final=[],this.grouped_data={},this.answer_loaded=!1,this.choices_mark={Yes:1,No:2},this.student_id=this.route.snapshot.paramMap.get("student_id"),console.log(this.student_id)}ngOnInit(){this.examForm=this.formBuilder.group({QBRE1:["",o.kI.required],QBRE2:["",o.kI.required],QBRE3:["",o.kI.required],QBRE4:["",o.kI.required],QBRE5:["",o.kI.required],QBIN1:["",o.kI.required],QBIN2:["",o.kI.required],QBIN3:["",o.kI.required],QBIN4:["",o.kI.required],QBIN5:["",o.kI.required],QBAR1:["",o.kI.required],QBAR2:["",o.kI.required],QBAR3:["",o.kI.required],QBAR4:["",o.kI.required],QBAR5:["",o.kI.required],QBSO1:["",o.kI.required],QBSO2:["",o.kI.required],QBSO3:["",o.kI.required],QBSO4:["",o.kI.required],QBSO5:["",o.kI.required],QBEN1:["",o.kI.required],QBEN2:["",o.kI.required],QBEN3:["",o.kI.required],QBEN4:["",o.kI.required],QBEN5:["",o.kI.required],QBCO1:["",o.kI.required],QBCO2:["",o.kI.required],QBCO3:["",o.kI.required],QBCO4:["",o.kI.required],QBCO5:["",o.kI.required]});try{this.http.get("http://34.100.168.105/api/api/json?file=part-b").subscribe(e=>{this.questions=e,this.answer_loaded=!0,console.log(e),this.check=!0,this.checkQuestionFormHasDemoVal||this.checkQuestionForm()})}catch(e){console.log("exception occured: ",e)}}checkQuestionForm(){this.checkQuestionFormHasDemoVal=!0;for(let e=0;e<this.questions.length;e++)this.questionForms.push({question_id:this.questions[e].question_id,group:this.questions[e].group})}onRadioChange(e,i,a){this.questionForms.splice(i,1,{question_id:a.question_id,group:a.group,value:e.detail.value,mark:this.choices_mark[e.detail.value]})}submitForm(){var e=this;return(0,x.Z)(function*(){try{if(e.grouped_data={},e.examForm.valid){e.questionForms.forEach(({mark:g,group:p})=>{e.grouped_data[p]||(e.grouped_data[p]=[]),e.grouped_data[p].push(g)}),e.grouped_data=JSON.parse(JSON.stringify(e.grouped_data));const i={groups:[e.grouped_data]};console.log(i);let a=e.total_mark_of_an_array(i.groups[0].Artistic),u=e.total_mark_of_an_array(i.groups[0].Conventional),l=e.total_mark_of_an_array(i.groups[0].Enterprising),d=e.total_mark_of_an_array(i.groups[0].Investigative),m=e.total_mark_of_an_array(i.groups[0].Realistic),P=e.total_mark_of_an_array(i.groups[0].Social);e.http.post("http://34.100.168.105/api/api/question?part=b",{student_id:e.student_id,realistic:m,investigative:d,artistic:a,social:P,enterprising:l,conventional:u}).subscribe(g=>{console.log(g)}),yield e.router.navigate(["/download",e.student_id])}else console.log("this is valid")}catch(i){console.log(i)}})()}total_mark_of_an_array(e){let i=0;for(let a=0;a<e.length;a++)i+=e[a];return i/10*100}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.eN),t.Y36(k.gz),t.Y36(k.F0),t.Y36(o.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-part-b-exam"]],standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[2,"display","flex","justify-content","center","margin-top","30px","font-weight","600"],[2,"font-size","22px","color","rgb(13,92,143)"],["style","display: flex; justify-content: center; background: aliceblue",4,"ngIf"],[2,"display","flex","justify-content","center","background","aliceblue"],[2,"max-width","400px",3,"formGroup"],["class","ion-margin-vertical back-trans",4,"ngFor","ngForOf"],["class","row-footer",4,"ngIf"],[1,"ion-margin-vertical","back-trans"],[2,"width","100%"],[1,"ion-margin-vertical","ion-margin-horizontal","ion-text-wrap"],[1,"ion-padding",3,"formControlName","ionChange"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["mode","md",3,"value"],[1,"row-footer"],["mode","ios","type","submit","expand","block",1,"ion-margin-vertical","ion-margin-horizontal","no-ripple",2,"--background","rgb(13,92,143)",3,"disabled","click"],[2,"font-size","18px"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content")(1,"ion-row",0)(2,"ion-text",1),t._uU(3,"Part B"),t.qZA()(),t.YNc(4,E,5,3,"ion-row",2),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.answer_loaded))},dependencies:[n.Pc,n.YG,n.W2,n.Ie,n.Q$,n.q_,n.B7,n.se,n.Nd,n.yW,n.U5,n.QI,c.ez,c.sg,c.O5,o.u5,o._Y,o.JJ,o.JL,f.JF,o.UX,o.sg,o.u]}),r})()}}]);