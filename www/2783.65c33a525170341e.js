"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2783],{2783:(O,p,s)=>{s.r(p),s.d(p,{PartBExamPage:()=>E});var B=s(5861),h=s(6895),i=s(433),a=s(6114),f=s(529),e=s(8256),k=s(1407);function q(n,u){if(1&n&&(e.TgZ(0,"ion-item",10)(1,"ion-radio",11),e._uU(2),e.qZA()()),2&n){const t=u.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function I(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",5)(1,"div",6)(2,"ion-label",7),e._uU(3),e.qZA(),e.TgZ(4,"ion-radio-group",8),e.NdJ("ionChange",function(o){const _=e.CHM(t),l=_.index,m=_.$implicit,d=e.oxw();return e.KtG(d.onRadioChange(o,l,m))}),e.YNc(5,q,3,2,"ion-item",9),e.qZA()()()}if(2&n){const t=u.$implicit;e.xp6(3),e.Oqu(t.Question),e.xp6(1),e.s9C("formControlName",t.question_id),e.xp6(1),e.Q6J("ngForOf",t.choices)}}let E=(()=>{class n{constructor(t,r,o,_){this.http=t,this.route=r,this.router=o,this.formBuilder=_,this.questions=[],this.check=!1,this.questionForms=[],this.checkQuestionFormHasDemoVal=!1,this.marksheet_final=[],this.grouped_data={},this.choices_mark={Yes:1,No:2},this.student_id=this.route.snapshot.paramMap.get("student_id"),console.log(this.student_id)}ngOnInit(){this.examForm=this.formBuilder.group({QBRE1:["",i.kI.required],QBRE2:["",i.kI.required],QBRE3:["",i.kI.required],QBRE4:["",i.kI.required],QBRE5:["",i.kI.required],QBIN1:["",i.kI.required],QBIN2:["",i.kI.required],QBIN3:["",i.kI.required],QBIN4:["",i.kI.required],QBIN5:["",i.kI.required],QBAR1:["",i.kI.required],QBAR2:["",i.kI.required],QBAR3:["",i.kI.required],QBAR4:["",i.kI.required],QBAR5:["",i.kI.required],QBSO1:["",i.kI.required],QBSO2:["",i.kI.required],QBSO3:["",i.kI.required],QBSO4:["",i.kI.required],QBSO5:["",i.kI.required],QBEN1:["",i.kI.required],QBEN2:["",i.kI.required],QBEN3:["",i.kI.required],QBEN4:["",i.kI.required],QBEN5:["",i.kI.required],QBCO1:["",i.kI.required],QBCO2:["",i.kI.required],QBCO3:["",i.kI.required],QBCO4:["",i.kI.required],QBCO5:["",i.kI.required]});try{this.http.get("http://34.100.168.105/api/api/json?file=part-b").subscribe(t=>{this.questions=t,console.log(t),this.check=!0,this.checkQuestionFormHasDemoVal||this.checkQuestionForm()})}catch(t){console.log("exception occured: ",t)}}checkQuestionForm(){this.checkQuestionFormHasDemoVal=!0;for(let t=0;t<this.questions.length;t++)this.questionForms.push({question_id:this.questions[t].question_id,group:this.questions[t].group})}onRadioChange(t,r,o){this.questionForms.splice(r,1,{question_id:o.question_id,group:o.group,value:t.detail.value,mark:this.choices_mark[t.detail.value]})}submitForm(){var t=this;return(0,B.Z)(function*(){try{if(t.examForm.valid){t.questionForms.forEach(({mark:c,group:g})=>{t.grouped_data[g]||(t.grouped_data[g]=[]),t.grouped_data[g].push(c)}),t.grouped_data=JSON.parse(JSON.stringify(t.grouped_data));const r={groups:[t.grouped_data]};console.log(r);let o=t.total_mark_of_an_array(r.groups[0].Artistic),_=t.total_mark_of_an_array(r.groups[0].Conventional),l=t.total_mark_of_an_array(r.groups[0].Enterprising),m=t.total_mark_of_an_array(r.groups[0].Investigative),d=t.total_mark_of_an_array(r.groups[0].Realistic),Q=t.total_mark_of_an_array(r.groups[0].Social);t.http.post("http://34.100.168.105/api/api/question?part=b",{student_id:t.student_id,realistic:d,investigative:m,artistic:o,social:Q,enterprising:l,conventional:_}).subscribe(c=>{console.log(c)}),yield t.router.navigate(["/download",t.student_id])}else console.log("this is valid")}catch(r){console.log(r)}})()}total_mark_of_an_array(t){let r=0;for(let o=0;o<t.length;o++)r+=t[o];return r/10*100}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.eN),e.Y36(k.gz),e.Y36(k.F0),e.Y36(i.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-part-b-exam"]],standalone:!0,features:[e.jDz],decls:9,vars:3,consts:[[3,"formGroup"],[2,"margin-top","24px","margin-left","31px"],[2,"font-size","24px","font-weight","500"],["class","ion-margin-vertical",4,"ngFor","ngForOf"],["type","submit","expand","block",1,"ion-margin-vertical","ion-margin-horizontal",3,"disabled","click"],[1,"ion-margin-vertical"],[2,"width","100%"],[1,"ion-margin-vertical","ion-margin-horizontal","ion-text-wrap"],[1,"ion-padding",3,"formControlName","ionChange"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["mode","md",3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-content")(1,"form",0)(2,"div",1)(3,"ion-text",2),e._uU(4,"Part B"),e.qZA()(),e.TgZ(5,"ion-list"),e.YNc(6,I,6,3,"ion-item",3),e.qZA(),e.TgZ(7,"ion-button",4),e.NdJ("click",function(){return r.submitForm()}),e._uU(8,"Submit"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",r.examForm),e.xp6(5),e.Q6J("ngForOf",r.questions),e.xp6(1),e.Q6J("disabled",!r.examForm.valid))},dependencies:[a.Pc,a.YG,a.W2,a.Ie,a.Q$,a.q_,a.B7,a.se,a.yW,a.U5,a.QI,h.ez,h.sg,i.u5,i._Y,i.JJ,i.JL,f.JF,i.UX,i.sg,i.u]}),n})()}}]);